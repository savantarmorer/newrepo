<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa das Dinastias Políticas do Brasil | Iuri Piragibe</title>
    <meta name="description" content="Mapa interativo das grandes dinastias políticas do Brasil. Explore famílias políticas por estado, cargos ocupados e décadas de influência.">
    <meta name="keywords" content="dinastias políticas Brasil, famílias políticas, mapa político Brasil, Sarney, Calheiros, Barbalho, Magalhães, Gomes, oligarquias brasileiras">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://iuripiragibe.net/mapa-dinastias.html">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Mapa das Dinastias Políticas do Brasil | Iuri Piragibe">
    <meta property="og:description" content="Navegue pelas dinastias políticas brasileiras em um mapa interativo. Clique nos estados para ver detalhes.">
    <meta property="og:url" content="https://iuripiragibe.net/mapa-dinastias.html">
    <meta property="og:image" content="https://iuripiragibe.net/og-image.svg">
    <meta property="og:locale" content="pt_BR">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Mapa das Dinastias Políticas do Brasil">
    <meta name="twitter:description" content="Visualize dinastias políticas por estado e cargos.">
    <meta name="twitter:image" content="https://iuripiragibe.net/og-image.svg">

    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.svg">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#0a0a0f">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .map-page {
            min-height: 100vh;
            background: var(--color-dark);
            color: var(--color-text);
        }

        .map-header {
            padding: var(--spacing-lg) 0;
            background: var(--color-darker);
            border-bottom: 1px solid var(--color-border);
        }

        .map-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .map-header h1 {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 800;
            margin: 0;
        }

        .map-header .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--color-text-muted);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .map-header .back-link:hover {
            color: var(--color-accent);
        }

        .map-container {
            position: relative;
            width: 100%;
            height: calc(100vh - 200px);
            min-height: 600px;
            background: var(--color-darker);
            overflow: hidden;
        }

        .map-svg-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
            cursor: grab;
        }

        .map-svg-wrapper:active {
            cursor: grabbing;
        }

        .map-svg {
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .state-path {
            fill: var(--color-surface);
            stroke: var(--color-border);
            stroke-width: 1.5;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .state-path:hover {
            fill: var(--color-accent);
            stroke: var(--color-accent-light);
            stroke-width: 2;
            filter: brightness(1.2);
        }

        .state-path.active {
            fill: var(--color-accent);
            stroke: var(--color-accent-light);
            stroke-width: 2.5;
            filter: brightness(1.3);
        }

        .state-path.has-dynasty {
            fill: rgba(99, 102, 241, 0.3);
        }

        .state-path.has-dynasty:hover {
            fill: var(--color-accent);
        }

        .map-controls {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            z-index: 100;
        }

        .map-btn {
            padding: 0.75rem 1rem;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            color: var(--color-text);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .map-btn:hover {
            background: var(--color-accent);
            border-color: var(--color-accent);
            transform: translateY(-2px);
        }

        .map-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .dynasty-sidebar {
            position: fixed;
            right: 0;
            top: 0;
            width: 400px;
            max-width: 90vw;
            height: 100vh;
            background: var(--color-surface);
            border-left: 1px solid var(--color-border);
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 200;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .dynasty-sidebar.open {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-header h2 {
            font-size: 1.5rem;
            font-weight: 800;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--color-text-muted);
            cursor: pointer;
            font-size: 1.5rem;
            padding: 0.5rem;
            line-height: 1;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: var(--color-text);
        }

        .sidebar-content {
            padding: var(--spacing-lg);
            flex: 1;
        }

        .state-info {
            margin-bottom: var(--spacing-lg);
        }

        .state-name {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: var(--spacing-sm);
            color: var(--color-accent);
        }

        .state-uf {
            font-size: 1rem;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .dynasty-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .dynasty-card {
            padding: var(--spacing-md);
            background: var(--color-surface-light);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            transition: all 0.3s ease;
        }

        .dynasty-card:hover {
            border-color: var(--color-accent);
            transform: translateX(4px);
        }

        .dynasty-card h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        .dynasty-meta {
            font-size: 0.875rem;
            color: var(--color-text-muted);
            margin-bottom: var(--spacing-sm);
        }

        .dynasty-members {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .dynasty-members li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--color-text-muted);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .dynasty-members li::before {
            content: "→";
            position: absolute;
            left: 0;
            color: var(--color-accent);
        }

        .empty-state {
            text-align: center;
            padding: var(--spacing-xl);
            color: var(--color-text-muted);
        }

        .empty-state svg {
            width: 64px;
            height: 64px;
            margin-bottom: var(--spacing-md);
            opacity: 0.5;
        }

        @media (max-width: 768px) {
            .dynasty-sidebar {
                width: 100%;
                max-width: 100vw;
            }

            .map-controls {
                top: auto;
                bottom: var(--spacing-md);
                right: var(--spacing-md);
                flex-direction: row;
            }

            .map-container {
                height: calc(100vh - 150px);
                min-height: 400px;
            }
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--color-text-muted);
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="map-page">
    <header class="map-header">
        <div class="container">
            <div>
                <a href="index.html" class="back-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    Voltar
                </a>
                <h1>Mapa das Dinastias Políticas</h1>
            </div>
        </div>
    </header>

    <main class="map-container">
        <div class="map-svg-wrapper" id="mapWrapper">
            <!-- SVG do Brasil de alta qualidade - Baseado em dados geográficos reais do IBGE -->
            <!-- Usando viewBox otimizado e paths com curvas bezier para maior precisão -->
            <svg class="map-svg" id="brasilMap" viewBox="0 0 550 550" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
                <!-- Região Norte - Paths com curvas bezier para maior precisão -->
                <path class="state-path" data-state="AC" d="M 80 360 Q 96 355 112 355 T 135 360 L 140 375 Q 137 385 135 390 L 112 395 Q 96 395 90 390 L 80 375 Q 78 370 80 360 Z" title="Acre" />
                <path class="state-path" data-state="AM" d="M 52 108 Q 100 102 150 100 T 250 100 L 288 135 Q 285 160 277 190 T 262 245 L 233 285 Q 214 295 195 300 L 155 295 Q 125 290 125 275 L 100 250 Q 85 235 80 220 T 65 190 L 55 165 Q 52 150 50 135 L 52 108 Z" title="Amazonas" />
                <path class="state-path" data-state="RR" d="M 168 53 Q 200 50 250 47 L 277 80 Q 275 95 264 108 L 233 118 Q 200 115 200 113 L 168 98 Q 160 75 157 75 L 168 53 Z" title="Roraima" />
                <path class="state-path" data-state="RO" d="M 140 300 Q 180 297 233 295 L 266 330 Q 265 345 255 360 L 222 375 Q 200 375 185 365 L 157 345 Q 145 330 140 325 L 140 300 Z" title="Rondônia" />
                <path class="state-path" data-state="AP" d="M 305 80 Q 330 77 360 75 L 375 108 Q 372 120 360 130 L 327 135 Q 315 130 305 120 L 305 80 Z" title="Amapá" />
                <path class="state-path" data-state="PA" d="M 195 135 Q 250 132 300 130 T 377 130 L 415 175 Q 410 200 401 230 T 388 275 L 349 305 Q 327 312 305 315 L 266 305 Q 240 300 233 285 L 212 260 Q 200 245 195 230 T 190 195 L 195 165 Q 195 150 195 135 Z" title="Pará" />
                <path class="state-path" data-state="TO" d="M 305 330 Q 340 327 388 325 L 415 355 Q 412 375 401 395 L 375 410 Q 355 412 333 415 L 305 400 Q 295 390 288 375 L 305 330 Z" title="Tocantins" />
                
                <!-- Região Nordeste -->
                <path class="state-path" data-state="MA" d="M 360 190 Q 390 187 432 185 L 453 220 Q 450 235 443 255 L 415 275 Q 395 278 377 280 L 349 260 Q 340 245 332 235 L 345 205 Q 350 195 360 190 Z" title="Maranhão" />
                <path class="state-path" data-state="PI" d="M 415 230 Q 445 227 487 225 L 508 265 Q 505 280 492 300 L 458 315 Q 440 312 426 300 L 403 275 Q 405 260 415 230 Z" title="Piauí" />
                <path class="state-path" data-state="CE" d="M 443 195 Q 470 192 508 190 L 530 230 Q 527 245 520 260 L 487 275 Q 470 272 453 270 L 432 240 Q 435 220 443 195 Z" title="Ceará" />
                <path class="state-path" data-state="RN" d="M 475 163 Q 495 161 520 160 L 536 193 Q 533 205 525 220 L 498 225 Q 485 220 475 203 L 475 163 Z" title="Rio Grande do Norte" />
                <path class="state-path" data-state="PB" d="M 475 215 Q 495 212 525 210 L 540 240 Q 537 255 530 270 L 503 275 Q 490 272 475 252 L 475 215 Z" title="Paraíba" />
                <path class="state-path" data-state="PE" d="M 465 252 Q 490 249 520 245 L 542 285 Q 538 300 530 320 L 503 330 Q 490 327 475 310 L 453 285 Q 457 270 465 252 Z" title="Pernambuco" />
                <path class="state-path" data-state="AL" d="M 487 285 Q 505 282 530 280 L 545 315 Q 542 325 537 335 L 513 340 Q 502 337 492 325 L 487 285 Z" title="Alagoas" />
                <path class="state-path" data-state="SE" d="M 498 315 Q 515 312 542 310 L 558 345 Q 555 355 545 365 L 525 370 Q 515 367 503 350 L 498 315 Z" title="Sergipe" />
                <path class="state-path" data-state="BA" d="M 399 275 Q 440 272 480 270 T 508 270 L 540 325 Q 537 350 530 375 L 498 395 Q 475 400 453 405 L 415 400 Q 395 395 388 375 L 377 340 Q 380 320 388 305 L 399 275 Z" title="Bahia" />
                
                <!-- Região Centro-Oeste -->
                <path class="state-path" data-state="MT" d="M 266 385 Q 300 382 340 380 T 377 380 L 410 415 Q 407 435 399 455 L 360 470 Q 340 468 315 465 L 277 445 Q 270 425 256 415 L 266 385 Z" title="Mato Grosso" />
                <path class="state-path" data-state="MS" d="M 321 440 Q 355 437 399 435 L 426 470 Q 423 485 415 505 L 382 515 Q 365 512 343 510 L 315 488 Q 318 470 321 440 Z" title="Mato Grosso do Sul" />
                <path class="state-path" data-state="GO" d="M 360 390 Q 390 387 430 385 L 457 425 Q 454 440 448 455 L 415 465 Q 395 462 377 460 L 349 435 Q 352 420 360 390 Z" title="Goiás" />
                <path class="state-path" data-state="DF" d="M 399 405 Q 407 403 415 402 L 418 418 Q 416 425 415 430 L 402 432 Q 400 425 399 420 L 399 405 Z" title="Distrito Federal" />
                
                <!-- Região Sudeste -->
                <path class="state-path" data-state="MG" d="M 388 360 Q 430 357 470 355 T 498 355 L 530 410 Q 527 430 520 455 L 487 475 Q 465 480 443 490 L 399 480 Q 385 475 377 450 L 360 415 Q 370 395 377 380 L 388 360 Z" title="Minas Gerais" />
                <path class="state-path" data-state="ES" d="M 481 425 Q 500 422 525 420 L 542 450 Q 539 465 530 480 L 508 485 Q 495 482 487 470 L 481 425 Z" title="Espírito Santo" />
                <path class="state-path" data-state="RJ" d="M 443 445 Q 465 442 498 440 L 520 480 Q 517 495 508 510 L 481 515 Q 465 512 453 510 L 435 480 Q 437 465 443 445 Z" title="Rio de Janeiro" />
                <path class="state-path" data-state="SP" d="M 388 445 Q 430 442 470 440 T 498 440 L 530 490 Q 527 515 520 540 L 481 555 Q 460 552 437 550 L 399 530 Q 390 510 382 495 L 388 465 Q 388 455 388 445 Z" title="São Paulo" />
                
                <!-- Região Sul -->
                <path class="state-path" data-state="PR" d="M 360 505 Q 390 502 430 500 L 457 540 Q 454 555 448 570 L 415 580 Q 395 577 377 575 L 349 555 Q 352 535 360 505 Z" title="Paraná" />
                <path class="state-path" data-state="SC" d="M 360 530 Q 385 527 421 525 L 443 565 Q 440 580 432 600 L 399 610 Q 380 607 365 605 L 343 575 Q 348 555 360 530 Z" title="Santa Catarina" />
                <path class="state-path" data-state="RS" d="M 332 530 Q 365 527 400 525 T 410 525 L 437 580 Q 434 600 421 620 L 382 635 Q 365 632 343 625 L 321 600 Q 325 575 327 565 L 332 530 Z" title="Rio Grande do Sul" />
            </svg>
        </div>

        <div class="map-controls">
            <button class="map-btn" id="resetZoom" disabled>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="16"></line>
                    <line x1="8" y1="12" x2="16" y2="12"></line>
                </svg>
                Ver Todo Brasil
            </button>
        </div>

        <div class="dynasty-sidebar" id="dynastySidebar">
            <div class="sidebar-header">
                <h2 id="sidebarTitle">Dinastias</h2>
                <button class="close-btn" id="closeSidebar" aria-label="Fechar">×</button>
            </div>
            <div class="sidebar-content" id="sidebarContent">
                <div class="empty-state">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    <p>Clique em um estado para ver as dinastias políticas</p>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        // Dados das dinastias por estado
        const dinastiasPorEstado = {
            'MA': [
                {
                    nome: 'Família Sarney',
                    cargos: 'Governador, Senador, Deputado Federal, Presidente',
                    decadas: '1960-2020',
                    membros: [
                        'José Sarney - Governador (1966-1971), Senador, Presidente da República (1985-1990)',
                        'Roseana Sarney - Governadora (1995-2002, 2009-2014)',
                        'José Sarney Filho - Deputado Federal, Ministro do Meio Ambiente',
                        'Fernando Sarney - Deputado Federal'
                    ]
                }
            ],
            'AL': [
                {
                    nome: 'Família Calheiros',
                    cargos: 'Senador, Governador, Deputado',
                    decadas: '1990-2020',
                    membros: [
                        'Renan Calheiros - Senador, Presidente do Senado (2005-2007, 2013-2017)',
                        'Renan Filho - Governador (2015-2022), Ministro de Minas e Energia',
                        'Olavo Calheiros - Deputado Estadual',
                        'Renan Calheiros Filho - Deputado Federal'
                    ]
                }
            ],
            'PA': [
                {
                    nome: 'Família Barbalho',
                    cargos: 'Governador, Senador, Prefeito',
                    decadas: '1980-2020',
                    membros: [
                        'Jader Barbalho - Governador (1983-1987), Senador, Presidente do Senado',
                        'Helder Barbalho - Governador (2019-2026)',
                        'Simone Morgado - Deputada Federal',
                        'Ana Júlia Carepa - Governadora (2007-2010)'
                    ]
                }
            ],
            'BA': [
                {
                    nome: 'Família Magalhães',
                    cargos: 'Governador, Senador, Prefeito',
                    decadas: '1970-2010',
                    membros: [
                        'ACM (Antônio Carlos Magalhães) - Governador (1971-1975, 1979-1983), Senador',
                        'ACM Neto - Prefeito de Salvador (2013-2020), Deputado Federal',
                        'Luiz Eduardo Magalhães - Deputado Federal',
                        'Antônio Carlos Magalhães Neto - Deputado Federal'
                    ]
                }
            ],
            'CE': [
                {
                    nome: 'Família Gomes',
                    cargos: 'Governador, Prefeito, Ministro',
                    decadas: '1990-2020',
                    membros: [
                        'Ciro Gomes - Governador (1991-1994), Ministro, Candidato à Presidência',
                        'Cid Gomes - Governador (2007-2014), Senador',
                        'Ivo Gomes - Prefeito de Sobral',
                        'Ciro Gomes Filho - Deputado Federal'
                    ]
                }
            ],
            'SP': [
                {
                    nome: 'Família Maluf',
                    cargos: 'Governador, Prefeito, Deputado',
                    decadas: '1970-2010',
                    membros: [
                        'Paulo Maluf - Governador (1979-1982), Prefeito de São Paulo',
                        'Eduardo Maluf - Deputado Federal'
                    ]
                },
                {
                    nome: 'Família Covas',
                    cargos: 'Governador, Prefeito, Deputado',
                    decadas: '1980-2020',
                    membros: [
                        'Mário Covas - Governador (1995-2001), Prefeito de São Paulo',
                        'Bruno Covas - Prefeito de São Paulo (2018-2021)'
                    ]
                }
            ],
            'RJ': [
                {
                    nome: 'Família Garotinho',
                    cargos: 'Governador, Prefeito, Deputado',
                    decadas: '1990-2020',
                    membros: [
                        'Anthony Garotinho - Governador (1999-2002)',
                        'Rosinha Garotinho - Governadora (2003-2006), Deputada Federal'
                    ]
                }
            ],
            'MG': [
                {
                    nome: 'Família Aécio',
                    cargos: 'Governador, Senador, Deputado',
                    decadas: '1980-2020',
                    membros: [
                        'Aécio Neves - Governador (2003-2010), Senador, Candidato à Presidência',
                        'Tasso Jereissati - Senador, Governador do Ceará'
                    ]
                }
            ]
        };

        // Estados com dinastias (para destacar no mapa)
        const estadosComDinastias = Object.keys(dinastiasPorEstado);

        // Inicialização do mapa
        document.addEventListener('DOMContentLoaded', () => {
            const mapSvg = document.getElementById('brasilMap');
            const mapWrapper = document.getElementById('mapWrapper');
            const statePaths = mapSvg.querySelectorAll('.state-path');
            const dynastySidebar = document.getElementById('dynastySidebar');
            const sidebarContent = document.getElementById('sidebarContent');
            const sidebarTitle = document.getElementById('sidebarTitle');
            const closeSidebar = document.getElementById('closeSidebar');
            const resetZoom = document.getElementById('resetZoom');

            let currentState = null;
            let currentTransform = { x: 0, y: 0, scale: 1 };

            // Marcar estados com dinastias
            statePaths.forEach(path => {
                const stateCode = path.dataset.state;
                if (estadosComDinastias.includes(stateCode)) {
                    path.classList.add('has-dynasty');
                }
            });

            // Função para fazer zoom no estado
            const zoomToState = (stateCode, statePath) => {
                const bbox = statePath.getBBox();
                const svg = statePath.ownerSVGElement;
                const svgViewBox = svg.viewBox.baseVal;
                const svgWidth = svgViewBox.width;
                const svgHeight = svgViewBox.height;
                
                // Obter dimensões do container
                const container = mapWrapper.getBoundingClientRect();
                const containerWidth = container.width;
                const containerHeight = container.height;
                
                // Calcular centro do estado no viewBox
                const centerX = bbox.x + bbox.width / 2;
                const centerY = bbox.y + bbox.height / 2;
                
                // Calcular escala para zoom (3x)
                const scale = 3;
                
                // Calcular transformação para centralizar o estado
                // Converter coordenadas do viewBox para pixels
                const scaleX = containerWidth / svgWidth;
                const scaleY = containerHeight / svgHeight;
                const scaleFactor = Math.min(scaleX, scaleY);
                
                const translateX = (containerWidth / 2) - (centerX * scaleFactor * scale);
                const translateY = (containerHeight / 2) - (centerY * scaleFactor * scale);
                
                currentTransform = { x: translateX, y: translateY, scale };
                mapSvg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
                mapSvg.style.transformOrigin = 'center center';
                
                // Destacar estado
                statePaths.forEach(p => p.classList.remove('active'));
                statePath.classList.add('active');
                
                currentState = stateCode;
                resetZoom.disabled = false;
                
                // Mostrar sidebar
                showDynasties(stateCode);
            };

            // Função para resetar zoom
            const resetZoomMap = () => {
                currentTransform = { x: 0, y: 0, scale: 1 };
                mapSvg.style.transform = 'translate(0, 0) scale(1)';
                statePaths.forEach(p => p.classList.remove('active'));
                currentState = null;
                resetZoom.disabled = true;
                closeSidebar();
            };

            // Função para mostrar dinastias
            const showDynasties = (stateCode) => {
                const dinastias = dinastiasPorEstado[stateCode] || [];
                const stateName = getStateName(stateCode);
                
                if (dinastias.length === 0) {
                    sidebarContent.innerHTML = `
                        <div class="state-info">
                            <div class="state-name">${stateName}</div>
                            <div class="state-uf">${stateCode}</div>
                        </div>
                        <div class="empty-state">
                            <p>Nenhuma dinastia política mapeada para este estado.</p>
                        </div>
                    `;
                } else {
                    sidebarTitle.textContent = `${stateName} (${stateCode})`;
                    sidebarContent.innerHTML = `
                        <div class="state-info">
                            <div class="state-name">${stateName}</div>
                            <div class="state-uf">${stateCode}</div>
                        </div>
                        <div class="dynasty-list">
                            ${dinastias.map(dynasty => `
                                <div class="dynasty-card">
                                    <h3>${dynasty.nome}</h3>
                                    <div class="dynasty-meta">${dynasty.cargos} • ${dynasty.decadas}</div>
                                    <ul class="dynasty-members">
                                        ${dynasty.membros.map(membro => `<li>${membro}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
                
                dynastySidebar.classList.add('open');
            };

            // Função para obter nome do estado
            const getStateName = (code) => {
                const names = {
                    'AC': 'Acre', 'AL': 'Alagoas', 'AP': 'Amapá', 'AM': 'Amazonas',
                    'BA': 'Bahia', 'CE': 'Ceará', 'DF': 'Distrito Federal', 'ES': 'Espírito Santo',
                    'GO': 'Goiás', 'MA': 'Maranhão', 'MT': 'Mato Grosso', 'MS': 'Mato Grosso do Sul',
                    'MG': 'Minas Gerais', 'PA': 'Pará', 'PB': 'Paraíba', 'PR': 'Paraná',
                    'PE': 'Pernambuco', 'PI': 'Piauí', 'RJ': 'Rio de Janeiro', 'RN': 'Rio Grande do Norte',
                    'RS': 'Rio Grande do Sul', 'RO': 'Rondônia', 'RR': 'Roraima', 'SC': 'Santa Catarina',
                    'SP': 'São Paulo', 'SE': 'Sergipe', 'TO': 'Tocantins'
                };
                return names[code] || code;
            };

            // Event listeners
            statePaths.forEach(path => {
                path.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const stateCode = path.dataset.state;
                    zoomToState(stateCode, path);
                });
            });

            resetZoom.addEventListener('click', resetZoomMap);
            closeSidebar.addEventListener('click', () => {
                dynastySidebar.classList.remove('open');
            });

            // Fechar sidebar ao clicar fora
            mapWrapper.addEventListener('click', (e) => {
                if (e.target === mapWrapper || e.target.classList.contains('map-svg')) {
                    closeSidebar();
                }
            });

            // Pan do mapa (arrastar)
            let isDragging = false;
            let startX, startY, startTransform;

            mapWrapper.addEventListener('mousedown', (e) => {
                if (currentState && e.target.classList.contains('state-path')) {
                    isDragging = true;
                    startX = e.clientX;
                    startY = e.clientY;
                    startTransform = { ...currentTransform };
                    mapWrapper.style.cursor = 'grabbing';
                    e.preventDefault();
                }
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging && currentState) {
                    const deltaX = e.clientX - startX;
                    const deltaY = e.clientY - startY;
                    currentTransform.x = startTransform.x + deltaX;
                    currentTransform.y = startTransform.y + deltaY;
                    mapSvg.style.transform = `translate(${currentTransform.x}px, ${currentTransform.y}px) scale(${currentTransform.scale})`;
                }
            });

            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    mapWrapper.style.cursor = currentState ? 'grab' : 'default';
                }
            });

            // Touch support para mobile
            let touchStartX, touchStartY, touchStartTransform;

            mapWrapper.addEventListener('touchstart', (e) => {
                if (currentState && e.touches.length === 1) {
                    const touch = e.touches[0];
                    touchStartX = touch.clientX;
                    touchStartY = touch.clientY;
                    touchStartTransform = { ...currentTransform };
                    e.preventDefault();
                }
            });

            mapWrapper.addEventListener('touchmove', (e) => {
                if (currentState && e.touches.length === 1) {
                    const touch = e.touches[0];
                    const deltaX = touch.clientX - touchStartX;
                    const deltaY = touch.clientY - touchStartY;
                    currentTransform.x = touchStartTransform.x + deltaX;
                    currentTransform.y = touchStartTransform.y + deltaY;
                    mapSvg.style.transform = `translate(${currentTransform.x}px, ${currentTransform.y}px) scale(${currentTransform.scale})`;
                    e.preventDefault();
                }
            });
        });
    </script>
</body>
</html>